# Blockchain Vulnerabilities

### Through popular blockchains have used Sybil attacks prevention mechanisms like PoS and PoW, there are still some other vulnerabilities that rarely occur but still worth mentioning.

## 51% Attack:
- #### In PoW if someone controls more than 50% of the network's computing power, they can manipulate the blockchain by creating a fork with their own version of the ledger. This can lead to double-spending, censorship, and other malicious activities.
- #### In PoS if someone controls more than 50% of the network's stake, they can manipulate the blockchain by creating a fork with their own version of the ledger. This can lead to double-spending, censorship, and other malicious activities.

### If someone gets 51% somehow, they haven't gotten permissions to reverse finality and finalise the blocks. This happens only when they have more than 2/3rd or 67% of the network's stake/computationol power.


## MEV and Sandwich Attacks

### What is MEV?
Whenever a transaction is created, it is not immediately included in the next block.
Instead, it first enters a waiting area called the **Mempool**, which holds all pending transactions.
Miners or validators then select transactions from the Mempool to include in a block, usually prioritizing those with **higher gas fees**.

This ordering ability allows miners (or bots) to extract additional profits by reordering, inserting, or excluding transactions — a phenomenon known as **MEV (Maximal Extractable Value)**.
In short, **MEV** is the maximum value that can be extracted by manipulating the inclusion order of transactions within a block.

---

### Sandwich Attacks

A **Sandwich Attack** is a specific type of MEV attack common in **DeFi** platforms such as Uniswap or SushiSwap.
It exploits **slippage** in **automated market makers (AMMs)** by front-running and back-running a victim’s transaction.

---

### Step-by-Step Breakdown

1. **Victim Transaction (Target)**
   - The victim submits a swap — e.g., swapping **1000 USDC → ETH** on Uniswap.
   - This large trade will push the ETH price **upward** due to AMM price impact.

2. **Attacker’s Front-Run**
   - The attacker monitors the Mempool and detects the victim’s pending transaction.
   - They send a **buy order for ETH** with a **higher gas fee**, ensuring it executes *before* the victim’s transaction.
   - The attacker’s purchase increases the ETH price.

3. **Victim Executes**
   - The victim’s swap now executes at a **worse price** (higher ETH price, less ETH received).
   - This creates **price slippage**.

4. **Attacker’s Back-Run**
   - Immediately after, the attacker sells the ETH purchased earlier.
   - They sell at the inflated price created by the victim’s trade.
   - The attacker profits from the **price difference**.

---

### Simplified Example

| Step | Action | ETH Price | Description |
|------|---------|------------|--------------|
| 1 | Victim plans to buy ETH worth $1000 | $1000 | Transaction pending |
| 2 | Attacker buys ETH first (front-run) | $1005 | Price increases slightly |
| 3 | Victim’s buy executes | $1010 | Victim gets less ETH |
| 4 | Attacker sells ETH (back-run) | $1010 → $1005 | Attacker profits from price swing |

**Profit Source:**
The attacker earns the difference between the inflated sell price and their initial buy price, minus gas fees.

---

### Summary
- **MEV** is the value extracted by reordering transactions in a block.
- **Sandwich attacks** are a form of MEV attack that exploit price slippage on AMMs.
- The attacker **front-runs** and **back-runs** a victim’s transaction to profit from temporary price changes caused by that transaction.


## Bugs in Client Software
#### Blockchain vulnerabilities are not always a result of flaws in the protocol's design. Sometimes, they stem from bugs in the client software that nodes run. This software is written by humans, who can make mistakes.

#### A famous example is the 184 Billion Bitcoin Bug of 2010. An attacker discovered an integer overflow bug in Bitcoin's code that allowed them to create 184 billion BTC out of thin air, violating the hard-coded maximum supply of 21 million. The Bitcoin community responded swiftly. Developers fixed the bug, and the network executed a hard fork to rewind the blockchain to a state before the malicious transaction occurred, effectively erasing the counterfeit coins. This incident underscores the critical importance of rigorous code auditing and testing.

## Replay Attacks
#### A replay attack occurs when a malicious actor takes a valid, signed transaction from one blockchain and re-broadcasts or "replays" it on another compatible chain. Imagine photocopying a signed check and attempting to cash it a second time. This could happen if you sign a transaction on Ethereum, and an attacker replays it on a compatible network like Optimism or Arbitrum to drain your funds there.

#### Modern blockchains have implemented robust protections to prevent this.

- #### Chain ID: Every transaction includes a unique identifier for the specific blockchain it is intended for (e.g., Chain ID 1 for Ethereum). A transaction signed for one chain is invalid on any other chain.

- #### Nonce: To prevent a transaction from being replayed on the same chain, each transaction from an account includes a nonce, which acts as a transaction counter. An account's first transaction has nonce 0, the second has nonce 1, and so on. A transaction with a specific nonce can only be processed once, making it unique and non-repeatable



# All these attacks are theoratically possible but practically impossible due to the decentralized nature of blockchain networks and the difficulty of coordinating attacks across multiple chains. And even if an attacker does it, the legitimate users create a different fork and the network will eventually converge on the correct state. This is because the network's consensus mechanism ensures that the longest chain is the valid one, and any fork will eventually be abandoned.
