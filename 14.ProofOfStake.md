# Proof of Stake

## In 2022 Ethereum moved from Proof of Work to Proof of Stake, as it is much more energy efficient.

## In proof of stake, validators are chosen based on their stake in the network. The more stake a validator has, the more likely they are to be chosen to validate a block. Validators are responsible for maintaining the integrity of the network by ensuring that transactions are valid and blocks are correctly formed. If a validator is found to be malicious, their stake is slashed, which serves as a deterrent to malicious behavior.
## So we no longer have a nonce field, and instead of mining we have signing operation.


### This chosen validator checks if the sender has enough funds, are the signatures valid, and if the transaction is valid.
## How Block Signing Works:
- Hash Calculation: Block hash is calculated from all block components (number, previous hash, data, validator, timestamp)
- Signing Process: The validator cryptographically signs the calculated hash
- Verification: Any change to block data changes the hash, invalidating the signature
- Security: This prevents tampering - any modification is immediately detectable
- Ethereum Reality: Real validators sign block hashes using their private keys


## Since in PoS we don't have mining, what if someone comes and re-writes history?
## This is where concept of Staking comes into play. Validators are chosen based on their stake in the network. The more stake a validator has, the more likely they are to be chosen to validate a block. Validators are responsible for maintaining the integrity of the network by ensuring that transactions are valid and blocks are correctly formed. If a validator is found to be malicious, their stake is slashed, which serves as a deterrent to malicious behavior.

### This is a great simulation of how PoS works - [link](https://demos.updraft.cyfrin.io)

## To validate new blocks and extend the chain, the network must reach consensus. This is where validators play their central role.

- #### **Becoming a Validator**: To participate, a user must stake a significant amount of cryptocurrency. On Ethereum, for example, a validator must stake a minimum of 32 ETH. This stake acts as collateral to ensure honest behavior.
- #### **Proposing and Attesting**: The PoS protocol pseudo-randomly selects one validator to propose a new block during a specific time interval, called a slot (12 seconds on Ethereum). Once a block is proposed, a committee of other validators is chosen to review it. They check its validity and vote on whether to include it in the chain. This voting process is called attestation.
- #### **Achieving Finality**: A block isn't considered permanent the moment it's proposed. It must go through a process to achieve finality, making it irreversible. For a block to be accepted, it must receive attestations (votes of approval) from validators representing at least two-thirds (2/3) of the total staked ETH in the network. A block that achieves this threshold becomes justified. When the next consecutive block also becomes justified, the previous block is upgraded to finalized. A finalized block is a permanent and unchangeable part of the blockchain's history.


## Security in Proof of Stake: Economic Incentives and Penalties
### The security of a Proof of Stake network is not based on computational work but on a powerful economic model. The system operates on the assumption that at least two-thirds of the total staked value is controlled by honest actors who will follow the protocol's rules.

### To enforce honesty, PoS introduces a severe penalty known as slashing. If a validator acts maliciously—for instance, by proposing two different blocks in the same slot or making contradictory attestations—other validators can submit cryptographic proof of this misbehavior to the network.

### When a validator is proven to have acted against the network's interest, they are slashed. This means a portion, or in severe cases all, of their staked 32 ETH is destroyed or "burned." The validator is also forcibly removed from the network. This mechanism creates a powerful economic disincentive. The potential financial loss from being slashed far outweighs any potential gain an attacker could achieve by trying to corrupt the chain.

### This creates a self-reinforcing security loop: the more value (staked ETH) that is securing the network, the more expensive it becomes for an attacker to acquire enough stake to control it, and therefore, the more secure the blockchain becomes.
